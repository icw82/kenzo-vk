[Kenzo VK](../) → [README](../README.md) → История изменений

История изменений
==========================
<!--
### 4.2.0 —
* __audio__: Увилична ширина аудиозаписей в сообщениях;
* __options__: Некотроые пункты теперь помечены как «только для десктопной версии VK»
  и «только для мобильной»;
-->

##### 4.1.0 — 22 августа 2016

* __audio__: Исправлено получение названий аудиозаписей из поиска
  (теперь не будет «em» в названиях);
* __audio__: Теперь URL аудиозаписей кэшируются на 12 часов, а не навсегда;
* __audio__: Теперь значёк [HQ] у аудиозаписей выпиливается, если кнопки с битрейтом включены;
* __ui__: Обесцвечивание аватар выпелено;
* __ui__: Ещё больше раскругления.


### 4.0.0 — 21 августа 2016

* Весь функционал для для старой версии VK теперь недоступен.
* Некоторый функционал теперь работает на новой версии VK;
* Теперь расширение загружается до начала формирования страницы.
  _Например, мусор быстрее выпиливается при первой загрузке сайта_;
* __downloads__: запилена очередь загрузок. _Пока без интерфейса. Детали работы очереди будут
  опубликованы позже;_
* __audio__: Проведена большая ревизия механизма чтения информации из аудио файлов:
  теперь большинство «кривых» файлов будут прочитаны и получена корректная информация о битрейте,
  методе кодирования и прочих параметрах вроде частоты дискретизации и версии MPEG
  (эта информация пока не доступна пользователю);
* __audio__: Кнопка, относящаяся к файлу в состоянии ожидания скачивания выглядит
  соответствующим образом (на ней нарисована стрелка вправо);
* __audio__: Появилась возможность включения/отключения кнопок без отключения модуля «Аудио».
  _Теперь можно отключить кнопки, сохранив при этом улучшения вёрстки элементов аудиозаписей;_
* __audio__: Теперь можно заменить оригинальную растровую кнопку проигрывания (►)
  на аналогичную менее контрастную векторную;
* __audio__: Добавлено пояснение к настройке «разделитель»;
* __video__: Модуль временно выпелен;
* __trash__: Скрытие репостов временно выпелено;
* __ui__: Исправлено пропадание идентификаторов групп, страниц и пользователей
  при переходе с удалённых или закрытых страниц;
* __ui__: Появилась возможность сделать VK менее круглым;
* __ui__: Теперь можно обесцветить аватары. _Совершенно бесполезная функция_;
* __options__: Опции включения/отключения прогресс-баров выпилены. Теперь програсс-бары
  включены всегда;
* __options__: Теперь перед сбросом настроек, появляется модальное окно для подтверждения
  данного действия.


##### 3.2.1 — 30 марта 2016

* __trash__: исправлено выпиливание продвигаемых постов.


#### 3.2.0 — 29 марта 2016

* __scrobbler__: Теперь есть возможность передавать в скробблер нефильтрованные
  называния аудиозаписей (опция в настройках);
* __trash__: Исправлена неполадка, при которой не скрывались продвигаемые посты при
  переключении между разделами сайта;
* Фильтр названий теперь корректно обрабатывает вопросительные знаки и многоточия.


##### 3.1.1 — 11 марта 2016

* __trash__: Исправлено выпиливание рекламы в сайдбаре, в связи с изменением идентификатора
  элемента;
* __audio__: Теперь кнопки есть в истории вложений к беседе.


#### 3.1.0 — 27 января 2016

* Обновлён механизм кэша. _Предполагается, что некотарая нестабильность в работе VK впредь
  не будет блокировать получение информации об аудиозаписях из кэша._
* Фильтр названий скачиваемых файлов теперь заменяет идущие подряд точки на одну
  и удаляет точку в начале названия;
* __ui__: Цифровые идентификаторы групп и страниц в заголовках (на синей плашке);


### 3.0.0 — 12 января 2016

* Незначительно изменён внешний вид настроек;
* Переписан код: неподдерживаемая с 49-й версии Chromium, функция — выпилена;
* __audio__: исправлены стили аудиозаписей, в соответствии с последними изменениями в вёрстке VK.
* __audio__: теперь кнопка аудиозаписи, найденной через плеер (музыка ▶), имеет корректные цвета
  при воспроизведении.
* __ui__: Новый модуль дополнений интерфейса UI (User Interface).
  _На данный момент все опции этого модуля выключены по умолчанию;_
* __ui__: Цифровые идентификаторы пользователей в заголовках страниц (после имени);
* __ui__: Ссылка на настройки расширения в левом меню.


##### 2.1.1 — 20 октября 2015

* __fix:__ Использован традиционный синтаксис объявления функций, вместо стрелочной формы, чтобы
  текущая версия Яндекс.Браузера понимала код;
* __video:__ Исправлена неполадка, при которой не появлялись кнопки под видео со включенным
  в браузере Adobe Flash Player.


#### 2.1.0 — 19 октября 2015

* __audio:__ Теперь атрибут title кнопки содержит информацию о размере файла.
  _Чтобы увидеть размер файла, нужно навести на кнопку курсор. Для видео эта функция пока
  отсутствует_;
* __video:__ Формат видеозаписи перед расширением в названии файла теперь опционален.


### 2.0.0 — 25 сентября 2015

* Переписана большая часть базового кода расширения. _Поэтому изменилась мажорная версия.
  Подробнее о версионировании можно почитать здесь: http://semver.org/lang/ru/;_
* __video:__ Запилены кнопки для плеера на html5 _(если в браузере отключен
  или отсутствует Adobe Flash Player);_
* __video:__ Теперь если использовать кнопку как ссылку (в контекстном меню пункт
  «сохранить ссылку как…»), то файл будет сохраняться с правильным именем. _Прогресс-бар
  в кнопке для такого способа скачивания пока не доступен;_
* __video:__ Теперь в названии файла перед расширением пишется формат.
  _Например: Название ролика.720.mp4_


##### 1.3.6 — 20 августа 2015

* __trash:__ Теперь выпиливаются репосты пользователей и групп (выключено по умолчанию);
* __audio:__ Опция VBR выпелена, теперь VBR определяется _всегда_;
* Аудио и видеозаписи с тильдой (~) в названиях теперь скачиваюстя корректно;
* Фильтр названий скачиваемых файлов теперь заменяет запрещённые символы на пробелы,
  а не удаляет их. Пробелы, в свою очередь, если они расположены друг за другом,
  сокращаются до одного.


##### 1.3.5 — 18 июля 2015

* Теперь на кнопках работает drag'n'drop, можно скачивать, перетаскивая ссылку в нужное место;
* __video:__ Кнопка «1080» теперь имеет правильную позицию;
* __video:__ Исправлены стили.


##### 1.3.4 — 3 июля 2015

* __trash:__ Улучшена идентификация продвигаемых постов в новостной ленте;
* __trash:__ Теперь прокрутка в сообщениях не портится после сбора большого количества «мусора».


##### 1.3.3 — 22 июня 2015

* __video:__ Длинные названия теперь не влияют на ширину плеера.


##### 1.3.2 — 8 июня 2015

* __trash:__ Теперь выпиливается «Заполненность профиля»;
* __trash:__ Теперь выпиливается большая кнопка ♥ на изображениях (выключено по умолчанию).


##### 1.3.1 — 27 мая 2015

* __scrobbler:__ Исправлен скробблинг для зацикленных треков. Теперь для каждого цикла
  будет передаваться своё время начала прослушивания;
* __trash:__ Теперь выпиливаются «продвигаемые посты» в новостной ленте (выключено по умолчанию).


#### 1.3 — 12 мая 2015

* __audio:__ Теперь если использовать кнопку как ссылку («сохранить ссылку как…»),
  то файл будет сохраняться с правильным именем. _Прогресс-бар для такого способа
  скачивания пока не доступен;_
* __scrobbler:__ Скробблинг Last.fm (для тестирования, выключен по умолчанию).

##### 1.2.5 — 27 апреля 2015

* Снова изменено описание.


##### 1.2.4 — 24 апреля 2015

* Иконка отмены теперь векторная;
* Изменение описания, в связи с тем, что chrome web-store снова жалуется на него.


##### 1.2.3 — 27 января 2015

* Настройки перевёрстаны;
* Теперь пробел перед расширением файла из названий скачиваемых файлов удаляется корректно.


##### 1.2.2 — 21 января 2015

* Теперь через контекстное меню можно взаимодействовать с прямой ссылкой на аудио-
  или видеозапись. _Для этого нужно нажать на кнопку с битрейтом (или форматом)
  правой кнопкой мыши и выбрать соответствующую команду (например, «Копировать
  адрес ссылки»)._


##### 1.2.1 — 18 января 2015

* __audio:__ После удаления аудиозаписи кнопка не пропадает, а изменяется на ```×_×```;
* __audio:__ После изменения информации аудиозаписи кнопка не пропадает;
* __audio:__ Теперь прогресс-бар виден, если скачиваемая аудиозапись проигрывается.
* __Настройки:__ Теперь настройки можно вернуть к первоначальным;
* __Настройки:__ Небольшие исправления;
* Из названий сохраняемых файлов удаляются лишние множественные пробелы,
  пробелы в начале и конце названия, а также перед расширением файла;
* Теперь из названий сохраняемых файлов удаляются квадратные и фигурные скобки вместе
  с содержимым (в настройках можно отключить; включено по умолчанию).


#### 1.2.0 — 3 января 2015

* Теперь в настройках можно отключать модули целиком.
* __video:__ Отредактирована оригинальная вёрстка видеозаписи (блок .mv_info_panel).
  _Теперь длинные названия не обрезаются, а переносятся на следующую строку. Увеличены отступы._
* __video:__ Добавлены кнопки для скачивания видеозаписей, находящихся на серверах VK.
  _Кнопки не появятся, если используется сторонний видеохостинг._


##### 1.1.4 — 1 января 2015

* Исправления и отлов багов;
* Модуль __Video__ временно выпилен.


##### 1.1.3 — 29 декабря 2014

* Фоновая страница теперь работает всегда. _Это позволяет избежать задержки начала
  скачивания, которая раньше имела место при некоторых условиях._
* В настройках можно включить режим отладки (бесполезная для пользователей фича).


##### 1.1.2 — 29 ноября 2014

* __audio:__ Идентификатор аудиозаписи в плеере теперь определяется корректно,
  без приставки _pad, что приводит к уменьшению запросов к серверу и более
  эффективному использованию кэша;
* __audio:__ Кнопки теперь есть в поиске через проигрыватель (pad);
* __audio:__ Исправлен стиль элемента аудиозаписи на странице поиска, теперь
  скачков при наведении нет.


##### 1.1.1 — 26 ноября 2014

* __fix__: аудиозапись в поиске не скачивалась.
* __fix__: аудиозаписи в поиске теряли кнопки.


#### 1.1.0 — 26 ноября 2014

* __audio:__ Прогресс-бар в кнопках запилен обратно.
* __audio:__ Теперь прогресс-бар не привязан к конкретному элементу DOM.
  _Это значит, что прогресс-бар будет отображаться на всех страницах, на которых
  присутствует скачиваемая аудиозапись. Даже если начать скачивать аудиозапись,
  закрыть страницу и во время скачивания открыть страницу снова, то там будет
  отображаться прогресс-бар._
* __audio:__ Прогресс-бары можно отключить в настройках расширения.


##### 1.0.2 — 14 ноября 2014

* __audio:__ Исправлены некоторые стили аудиозаписей: теперь в них влазит больше текста;
* __audio:__ Сокращена максимальная длина имени автора в аудиозаписи, теперь она занимает
  примерно половину строки и не мешает чтению названия;
* Теперь из назавний сохраняемых файлов также удаляется символ `"`.

##### 1.0.1 — 13 ноября 2014

* __audio:__ Исправлен повтор создания кнопки, приводящий к дублированию оной.


### 1.0.0 — 13 ноября 2014

* Рефакторинг — реорганизация кода без изменения функционала расширения;
* В связи с тем, что аудиозаписи начали раздаваться с домена vk-cdn.net,
  он дополнил список доменов (в манифесте), к котором нужно разрешить доступ;
* Из названий сохраняемых файлов удаляются символы: `\`, `/`, `*`, `?`, `<`,
  `>`, `:`, и `|`.
* Теперь по умолчанию включены: прямые ссылки на видео и определение VBR.
  _Это никак не повлияет на уже настроенное расширение;_
* __audio:__ Теперь в качестве разделителя можно выбрать среднее тире `–`.

<!--
_0.10.3 — 2014.10.28_

* В связи с тем, что аудиозаписи начали раздаваться с домена vk-cdn.net,
  он дополнил список доменов (в манифесте), к котором нужно разрешить доступ.

_0.10.2_

* Незначительные изменения

_0.10.1_

* Из названий закачиваемых файлов удаляются символы: \, /, *, ?, <, >, :, и |.
-->


### 0.10

* __β:__ Новый механизм скачивания файлов. Теперь файлы сразу передаются
  в «Downloads» браузера и уже сам браузер скачивает файл;
* __β:__ Если файл уже присутсвует в директории (включая файлы, скачиваемые
  в данный момент), то появится диалоговое окно;
* __audio:__ Прогресс-бар в кнопках временно выпелен.


### 0.9

* __audio:__ В настройках можно выбрать разделитель (тире или дефис) в названии
  скачиваемой аудиозаписи (тире по умолчанию);
* __audio:__ Добавлен упрощённый вид кнопок (отключен по умолчанию).
  _Если потребуется работа с большим количеством кнопок на странице и браузер
  начитает тормозить, то лучше включить упрощённый вид кнопок, в котором
  отсутствует анимация;_
* __audio:__ Исправлено определение среднего битрейта для аудиозаписей с VBR
  (если опция определение VBR выключена).
* __audio:__ Теперь кнопки есть в Диалогах;
* __audio:__ Теперь кнопки есть в окне прикрепления аудиозаписи к посту или сообщению;
* __audio:__ Исправлены стили в вставке поста в личных сообщениях;
* __audio:__ Исправлено отображение кнопки трансляции в записи на стене;
* __audio:__ Исправлен стиль блока аудиозаписи в комментарии;
* __video:__ Добавлены прямые ссылки на видеозаписи (выключено по умолчанию).
  _Только для видеозаписей, расположенных на серверах vk.com;_
* __trash:__ Скрытие блока «Популярные сообщества»;
* __trash:__ Скрытие рекламного блока между постами, при переключениях между разделами VK;

<!--
_0.8.7_

* __audio:__ Добавлен упрощённый вид кнопок (отключен по умолчанию). Если потребуется
  работа с большим количеством кнопок на странице и браузер начитает тормозить,
  то лучше включить упрощённый вид кнопок, в котором отсутствует анимация.
* __audio:__ Исправлены стили в вставке поста в личных собщениях;
* __trash:__ Скрытие блока «Популярные сообщества»;

_0.8.6_

* __audio:__ Исправлено отображение кнопки трансляции в записи на стене.

_0.8.5_

* __audio:__ Кнопка теперь есть в окне прикрепления аудиозаписи к посту или сообщению;
* __audio:__ Исправлен стиль блока аудиозаписи в комментарии.

_0.8.4_

* __audio:__ В настройках можно выбрать разделитель (тире или дефис) в названии
  скачиваемой аудиозаписи (тире по умолчанию);
* __audio:__ Теперь кнопки есть в Диалогах;
* Прочие исправления.


_0.8.3_

* __video:__ Добавлены прямые ссылки на видеозаписи (выключено по умолчанию).
  _Только для видеозаписей, расположенных на серверах vk.com;_


_0.8.2_

* __audio:__ Исправлено определение среднего битрейта для аудиозаписей с VBR
  (если опция определение VBR выключена).
* Исправление описания расширения.

_0.8.1_

* __trash:__ Скрытие рекламного блока между постами, при переключениях между разделами VK;
-->

### 0.8
* __audio:__ Определение VBR (опционально, выключено по умолчанию).<br/>
  _[VBR](http://ru.wikipedia.org/wiki/MP3#VBR) (англ. Variable Bit Rate) —
  переменный битрейт. Невозможно однозначно определить точный битрейт Аудиозаписей,
  кодированных этим методом. Если данная опция выключена, битрейт аудиозаписей с VBR
  будет рассчитан по стандартной формуле:_
  <br/>```(размер_файла – размер_ID3_тегов) / длительность```
* __audio:__ Кэширование информации об аудиозаписях теперь опционально
  (включено по умолчанию);
* __audio:__ При удалении аудиозаписи, кнопка адекватно на это реагирует ```×_×```.
* Прочие исправления.


<!--
_0.7.2_

* __audio:__ Исправлены стили;
* __audio:__ Исправлен баг при востановлении аудиозаписи;
* __audio:__ Определение VBR (опционально, выключено по умолчанию).

_0.7.1_

* Рефакторинг,
* __audio:__ Кэширование информации об аудиозаписях теперь опционально
  (включено по умолчанию);
* __audio:__ При удалении аудиозаписи, кнопка адекватно на это реагирует ```×_×```.

-->

### 0.7
* Запилена страница настроек;
* __audio:__ Индикация изъятых и недоступных аудиозаписей;
* __audio:__ Доработаны стили кнопки, появилась анимация;
* __trash:__ Скрытие рекламного блока между постами;
* __trash:__ Скрытие блока с предложением «друзей» в сайдбаре слева;
* Прочие исправления.

<!--

_0.6.6_

* Страница настроек;
* Появилось несколько опций для блока __trash__ (скрытие навязчивых блоков);
* __trash:__ Скрытие рекламного блока между постами;
* __audio:__ Дополнен стиль недоступных аудиозаписей.

_0.6.5_

* __audio:__ Исправлены стили (кнопка в плейлисте).

_0.6.4_

* __audio:__ Рефакторинг некоторых функций.

_0.6.3_

* __audio:__ Новый механизм определения битрейта;
* __audio:__ Исправлены стили;
* __audio:__ Индикация изъятых и недоступных аудиозаписей.

_0.6.2_

* Кнопка расширения в панели браузера выпелена, поскольку не имеет никакого функционала;
* __trash:__ Скрытие блока с предложением «друзей» в сайдбаре слева;
* __audio:__ Кеширование битрейта снова работает;
* __audio:__ Доработаны стили кнопки, появилась анимация.

_0.6.1_

* __audio:__ Кэширование временно выпелено.

-->

### 0.6
* __audio:__ Кэширование информации о аудиозаписях (битрейт);
* __audio:__ Теперь при измении информации аудиозаписи кнопка не пропадает;
* __audio:__ Теперь кнопки есть в поиске по аудиозаписям;
* __audio:__ Исправлено определение битрейта для записей с битрейтом в 320 kbps;
* __trash:__ Скрытие блока рекламы в сайдбаре слева;
* Прочие исправления.

<!--
_0.5.5_

* β: Кэширование информации о аудиозаписях (битрейт);
* Исправлен стиль блока аудиозаписи в комментарии на стене;
* Исправлен стиль слока аудиозаписи в разделе «аудиозаписи».

_0.5.4_

* Исправлено скрытие рекламы.

_0.5.3_

* Исправлено определение битрейта для записей с битрейтом в 320 kbps;
* Теперь скрывает блок рекламы в сайдбаре слева.

_0.5.2_

* Теперь кнопки есть в общем поиске.

_0.5.1_

* Теперь кнопки есть в поиске по аудиозаписям;
* Теперь при измении информации аудиозаписи кнопка не пропадает.
-->

### 0.5
* __audio:__ Новые стили по предложению [Александра Журавского](http://vaderzone.ru/);
* __audio:__ Убран текстовый индикатор в прогресс-баре (проценты);
* __audio:__ Округление битрейта;
* Иконка расширения.

<!--
_0.4.6_

* Дополнительные иконки расширения.

_0.4.5_
* Округление битрейта.

_0.4.4_

* Коррекция стилей.

_0.4.3_

* Иконка расширения.

_0.4.2_

* Новые стили по предложению [Александра Журавского](http://vaderzone.ru/);
* Убран текстовый индикатор в прогресс-баре (проценты).

_0.4.1_

* Исправлена ошибка с обработкой аудиозаписей в поиске.
-->

### 0.4
* Добавлена возможность скачивания аудиозаписей из постов;
* Поправлены стили.

### 0.3
* Запилен прогресс-бар;
* Отмена скачивания.

### 0.2
* Новый вид кнопки скачивания, совмещённой с показателем битрейта.
